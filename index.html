<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Imperium Server</title>
</head>


<body>
    <header>
        <h1>Welcome to the Imperium Server!</h1>
    </header>

    <main>

    <script>
        async function fetchData() {
            const name = "Imperium"
            try {
                const response = await fetch('https://servers.minetest.net/list');
                const data = await response.json();

                const players = document.getElementById('players');
                players.innerHTML = "";
                const status = document.getElementById('status');

                var found = false;

                data.list.forEach(server => {
                    if (server.name) {
                        found = true;
                        status.innerHTML = "Online:";
                        if (server.clients_list) {
                            if (server.name == name) {
                                server.clients_list.forEach(player => {
                                    var next = document.createElement('li');
                                    next.textContent = "\t" + player;

                                    // Append the paragraph to the div
                                    players.appendChild(next);
                                });
                            }
                        }
                    }
                });
                if (found == false) {
                    status.innerHTML = "Offline";
                }

            } catch (error) {
                console.log('Error fetching data:' + error);
            }
        }

        // Fetch server status when the page loads
        fetchData();
        setInterval(fetchData, 5000)
    </script>

        <section class="server-info">
            <h2>Server Information</h2>
            <p><strong>Server Name:</strong> Imperium</p>
            <p><strong>IP Address:</strong> 47.221.239.68</p>
            <p><strong>Port:</strong> 30031</p>
            <p><strong>Game:</strong> Mineclonia (Minetest 5.10.0-dev)</p>
            <p><strong>Game Mode:</strong> Survival/pvp</p>
        </section>

        <br>

        <section class="online">
            <h2><div id="status">Loading...</div></h2>
            <div id="players">Loading...</div>
        </section>

        <br>

        <section class="server-rules">
            <h2>Server Rules</h2>
            <ul>
                <li>No excesive swearing/insulting - mute max 1 day, kick, ban max 7 days</li>
                <li>No nsfw content - Ban (30 day or perm)</li>
                <li>No disrespecting staff while they are on  an admin account (does NOT apply to mods, only admins and devs)  - mute (max 1 hour)</li>
                <li>No spamming - mute 1 hour</li>
                <li>Keep chats in the correct channel - mute for 1 hour</li>
                <li>Follow all rules on signs in game - what ever it says in game or here</li>
                <li>No possesion of a non-natural item (e.g. command block) or duped items without the role of admin or dev - ban 30 days</li>
                <li>Don't ask admins for items or to trade - Mute 30 min or kick</li>
            </ul>
        </section>
    </main>

    <footer class="footer">
        <p>&copy; 2024 Xeno333. All rights reserved.</p>
        <p>Join our discord at: https://discord.gg/nAqE7gPTaj</p>
    </footer>
</body>
</html>
